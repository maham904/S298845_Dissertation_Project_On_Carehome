{% extends "core/base.html" %}

{% block content %}
<div class="container-fluid">
    <!-- Page Heading -->
<!--    <div class="d-sm-flex align-items-center justify-content-between mb-4">-->
<!--        <h1 class="h3 mb-0 text-gray-800">Incident Report</h1>-->
<!--        <a href="#" onclick="window.print()" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm">-->
<!--            <i class="fas fa-download fa-sm text-white-50"></i> Print Report-->
<!--        </a>-->
<!--    </div>-->

    <!-- Report Content -->
    <div class="incident-report protected-content" style="font-family: Arial, sans-serif; font-size: 11px; padding: 20px 40px;">
        <h2 style="text-align: center; margin: 0; font-size: 14px; margin-bottom: 5px;">PRESTIGE SUPPORTED LIVING SERVICES LTD</h2>
        <h2 style="text-align: center; margin: 0; font-size: 14px; margin-bottom: 5px;">Incident Report Form</h2>

        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
            <tr>
                <td style="font-weight: bold; width: 30%; border: 1px solid #000; padding: 8px; vertical-align: top;">Date and Time of incident:</td>
                <td style="border: 1px solid #000; padding: 8px; vertical-align: top;">{{ data.incident_datetime }}</td>
                <td style="font-weight: bold; width: 30%; border: 1px solid #000; padding: 8px; vertical-align: top;">Location:</td>
                <td style="border: 1px solid #000; padding: 8px; vertical-align: top;">{{ data.location }}</td>
            </tr>
            <tr>
                <td style="font-weight: bold; width: 30%; border: 1px solid #000; padding: 8px; vertical-align: top;">Service user/s involved:</td>
                <td style="border: 1px solid #000; padding: 8px; vertical-align: top;">{{ data.service_user }}</td>
                <td style="font-weight: bold; width: 30%; border: 1px solid #000; padding: 8px; vertical-align: top;">D.O.B</td>
                <td style="border: 1px solid #000; padding: 8px; vertical-align: top;">{{ data.dob }}</td>
            </tr>
            <tr>
                <td style="font-weight: bold; width: 30%; border: 1px solid #000; padding: 8px; vertical-align: top;">Staff Involved in the incident:</td>
                <td colspan="3" style="border: 1px solid #000; padding: 8px; vertical-align: top;">{{ data.staff_involved }}</td>
            </tr>
            <tr>
                <td style="font-weight: bold; width: 30%; border: 1px solid #000; padding: 8px; vertical-align: top;">Write in detail what the Service User was doing prior to the incident:</td>
                <td colspan="3" style="border: 1px solid #000; padding: 8px; vertical-align: top; min-height: 100px;">{{ data.prior_description }}</td>
            </tr>
            <tr>
                <td style="font-weight: bold; width: 30%; border: 1px solid #000; padding: 8px; vertical-align: top;">Write in detail the description of the incident (including the behaviour of the Service user):</td>
                <td colspan="3" style="border: 1px solid #000; padding: 8px; vertical-align: top; min-height: 100px;">{{ data.incident_description }}</td>
            </tr>
            <tr>
                <td style="font-weight: bold; width: 30%; border: 1px solid #000; padding: 8px; vertical-align: top;">Write in details the response of the Service User:</td>
                <td colspan="3" style="border: 1px solid #000; padding: 8px; vertical-align: top; min-height: 100px;">{{ data.user_response }}</td>
            </tr>
        </table>

        <!-- Page Break for second page content -->
        <div style="page-break-after: always;"></div>

        <h2 style="text-align: center; margin: 0; font-size: 14px; margin-bottom: 5px;">PRESTIGE SUPPORTED LIVING SERVICES LTD</h2>
        <h2 style="text-align: center; margin: 0; font-size: 14px; margin-bottom: 5px;">Incident Report Form (continued)</h2>

        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
            <tr>
                <td style="font-weight: bold; width: 30%; border: 1px solid #000; padding: 8px; vertical-align: top;">Detail of any injuries:</td>
                <td colspan="3" style="border: 1px solid #000; padding: 8px; vertical-align: top; min-height: 100px;">{{ data.injuries_detail }}</td>
            </tr>
            <tr>
                <td style="font-weight: bold; width: 30%; border: 1px solid #000; padding: 8px; vertical-align: top;">Body Chart filled in:</td>
                <td colspan="3" style="border: 1px solid #000; padding: 8px; vertical-align: top;">N/A</td>
            </tr>
            <tr>
                <td style="font-weight: bold; width: 30%; border: 1px solid #000; padding: 8px; vertical-align: top;">Details of any damage to property:</td>
                <td colspan="3" style="border: 1px solid #000; padding: 8px; vertical-align: top;">N/A</td>
            </tr>
            <tr>
                <td style="font-weight: bold; width: 30%; border: 1px solid #000; padding: 8px; vertical-align: top;">PRN Medication Administered according to Protocol</td>
                <td style="border: 1px solid #000; padding: 8px; vertical-align: top;">{% if data.prn_administered %}✓{% else %}□{% endif %}</td>
                <td style="font-weight: bold; width: 30%; border: 1px solid #000; padding: 8px; vertical-align: top;">By whom:</td>
                <td style="border: 1px solid #000; padding: 8px; vertical-align: top;">{{ data.prn_by_whom }}</td>
            </tr>
        </table>

        <table style="width: 100%; margin-top: 20px; border-collapse: collapse;">
            <tr>
                <th rowspan="2" style="border: 1px solid #000; padding: 5px; text-align: center;">Person</th>
                <th colspan="2" style="border: 1px solid #000; padding: 5px; text-align: center;">Contacted</th>
                <th rowspan="2" style="border: 1px solid #000; padding: 5px; text-align: center;">Date</th>
                <th rowspan="2" style="border: 1px solid #000; padding: 5px; text-align: center;">Time</th>
                <th rowspan="2" style="border: 1px solid #000; padding: 5px; text-align: center;">Comment – enter person spoken and advice given</th>
            </tr>
            <tr>
                <th style="border: 1px solid #000; padding: 5px; text-align: center;">Yes</th>
                <th style="border: 1px solid #000; padding: 5px; text-align: center;">No</th>
            </tr>
            <tr>
                <td style="border: 1px solid #000; padding: 5px; text-align: center;">Manager</td>
                <td style="width: 15%; text-align: center; border: 1px solid #000; padding: 5px;">{% if data.contacted_manager %}✓{% endif %}</td>
                <td style="width: 15%; text-align: center; border: 1px solid #000; padding: 5px;">{% if not data.contacted_manager %}✓{% endif %}</td>
                <td style="border: 1px solid #000; padding: 5px;"></td>
                <td style="border: 1px solid #000; padding: 5px;"></td>
                <td style="border: 1px solid #000; padding: 5px;"></td>
            </tr>
            <tr>
                <td style="border: 1px solid #000; padding: 5px; text-align: center;">Police</td>
                <td style="width: 15%; text-align: center; border: 1px solid #000; padding: 5px;">{% if data.contacted_police %}✓{% endif %}</td>
                <td style="width: 15%; text-align: center; border: 1px solid #000; padding: 5px;">{% if not data.contacted_police %}✓{% endif %}</td>
                <td style="border: 1px solid #000; padding: 5px;"></td>
                <td style="border: 1px solid #000; padding: 5px;"></td>
                <td style="border: 1px solid #000; padding: 5px;"></td>
            </tr>
            <tr>
                <td style="border: 1px solid #000; padding: 5px; text-align: center;">Paramedics</td>
                <td style="width: 15%; text-align: center; border: 1px solid #000; padding: 5px;">{% if data.contacted_paramedics %}✓{% endif %}</td>
                <td style="width: 15%; text-align: center; border: 1px solid #000; padding: 5px;">{% if not data.contacted_paramedics %}✓{% endif %}</td>
                <td style="border: 1px solid #000; padding: 5px;"></td>
                <td style="border: 1px solid #000; padding: 5px;"></td>
                <td style="border: 1px solid #000; padding: 5px;"></td>
            </tr>
        </table>
    </div>
</div>

<style>
    /* Prevent text selection*/
    .protected-content {
        -webkit-user-select: none; /* Safari */
        -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* IE10+/Edge */
        user-select: none; /* Standard */
    }

    @media print {
        body * {
            visibility: hidden;
        }
        .incident-report, .incident-report * {
            visibility: visible;
        }
        .incident-report {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
        }
        .no-print {
            display: none !important;
        }
        /* Allow text selection for printing */
        .protected-content {
            -webkit-user-select: text !important;
            -moz-user-select: text !important;
            -ms-user-select: text !important;
            user-select: text !important;
        }
    }
</style>

<script>
    // Prevent right-click context menu
    document.addEventListener('contextmenu', function(e) {
        e.preventDefault();
    });

    // Prevent keyboard shortcuts (Ctrl+C, Ctrl+A, etc.)
    document.addEventListener('keydown', function(e) {
        // Disable Ctrl+A, Ctrl+C, Ctrl+X, Ctrl+V
        if (e.ctrlKey && (e.keyCode === 65 || e.keyCode === 67 || e.keyCode === 86 || e.keyCode === 88 || e.keyCode === 85)) {
            e.preventDefault();
        }
        // Disable F12 (Developer Tools)
        if (e.keyCode === 123) {
            e.preventDefault();
        }
    });
</script>
{% endblock %}